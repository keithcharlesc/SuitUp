<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- INTERFACE -->
    <cc:interface>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>

        <p:dialog id="dialogUpdateStore1" widgetVar="dialogUpdateStore1" header="Update Store Details" width="100em;" height="20em" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" closeOnEscape="true">

            <h:form id="formUpdateStore1">

                <p:messages id="messages" redisplay="false" />

                <p:panelGrid>

                    <p:row>
                        <p:column>
                            <p:outputLabel style="width: 10em;" for="storeId" value="Store ID"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="storeId" value="#{storeManagementManagedBean.selectedStoreEntityToUpdate.storeId}" disabled="true" />
                        </p:column>
                        <p:column>
                            &nbsp;
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="storeName" value="Store Name"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="storeName" value="#{storeManagementManagedBean.selectedStoreEntityToUpdate.storeName}" required="true" requiredMessage="Store Name is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="storeName" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="storeDescription" value="Store Description"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="storeDescription" value="#{storeManagementManagedBean.selectedStoreEntityToUpdate.storeDescription}" required="true" requiredMessage="Store Description is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="storeDescription" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="openingHour" value="Opening Hour"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="openingHour" value="#{storeManagementManagedBean.selectedStoreEntityToUpdate.openingHour}" placeholder="09:00" required="true" requiredMessage="Opening Hour is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="openingHour" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="closingHour" value="Closing Hour"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="closingHour" value="#{storeManagementManagedBean.selectedStoreEntityToUpdate.closingHour}" placeholder="22:00" required="true" requiredMessage="Closing Hour is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="closingHour" />
                        </p:column>
                    </p:row>

                    <p:columnGroup type="footer">
                        <p:row>
                            <p:column colspan="3" style="text-align: center;">
                                <p:commandButton value="Next" update="UpdateStore:formUpdateStore2" oncomplete="PF('dialogUpdateStore2').show(); PF('dialogUpdateStore1').hide()" />                                
                            </p:column>
                        </p:row>
                    </p:columnGroup>

                </p:panelGrid>

            </h:form>

        </p:dialog>

        <p:dialog id="dialogUpdateStore2" widgetVar="dialogUpdateStore2" header="Update Store Address" width="50em" height="25em" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" closeOnEscape="true" >

            <h:form id="formUpdateStore2">
                
                <!--<p:messages id="messages2" redisplay="false" />-->

                <p:panelGrid style="margin: 0 auto">
                    <p:row>
                        <p:column>
                            <p:outputLabel style="width: 10em;" for="addressId" value="Address ID"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="addressId" value="#{storeManagementManagedBean.addressEntityToUpdate.addressId}" disabled="true" />
                        </p:column>
                        <p:column>
                            &nbsp;
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="addressName" value="Address Name"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="addressName" value="#{storeManagementManagedBean.addressEntityToUpdate.name}" required="true" requiredMessage="Address Name is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="addressName" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="phoneNumber" value="Phone Number"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="phoneNumber" value="#{storeManagementManagedBean.addressEntityToUpdate.phoneNumber}" required="true" requiredMessage="Phone Number is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="phoneNumber" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="addressLineOne" value="Address Line 1"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="addressLineOne" value="#{storeManagementManagedBean.addressEntityToUpdate.addressLineOne}" required="true" requiredMessage="Address Line 1 is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="addressLineOne" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="addressLineTwo" value="Address Line 2"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="addressLineTwo" value="#{storeManagementManagedBean.addressEntityToUpdate.addressLineTwo}" required="true" requiredMessage="Address Line 2 is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="addressLineTwo" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="postalCode" value="Postal Code"/>
                        </p:column>
                        <p:column>
                            <p:inputText style="width: 20em;" id="postalCode" value="#{storeManagementManagedBean.addressEntityToUpdate.postalCode}" required="true" requiredMessage="Postal Code is required"/>
                        </p:column>
                        <p:column>
                            <p:message for="postalCode" />
                        </p:column>
                    </p:row>
                    
                    <f:facet name="footer">
                        <p:column colspan="3" style="text-align: center">
                            <p:commandButton value="Back" oncomplete="PF('dialogUpdateStore1').show(); PF('dialogUpdateStore2').hide()" />
                            <p:commandButton value="Update Store" actionListener="#{storeManagementManagedBean.updateStore}" update="UpdateStore:formUpdateStore1 @form formAllStores:dataTableAllStores" process="@form UpdateStore:formUpdateStore2" oncomplete="PF('dialogUpdateStore1').show(); PF('dialogUpdateStore2').hide();" />
                        </p:column>
                    </f:facet>
                </p:panelGrid>

            </h:form>

        </p:dialog>       

    </cc:implementation>
</html>